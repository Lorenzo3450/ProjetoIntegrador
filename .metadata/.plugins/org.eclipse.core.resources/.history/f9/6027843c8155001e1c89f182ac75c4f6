package model.dao.Gerente;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;
import controller.Ferramentas.Produto;
import model.dao.ConexãoBD;

public class RelatorioABCDao {

    public static List<Produto> inicializaTabela() throws SQLException {
        try (
            Connection connection = ConexãoBD.Conexao();
            Statement statement = connection.createStatement()) {
            String query = "SELECT descricao, validade, quantidade, valor_comprado_unidade, valor_vendido_unidade, marca_produto, codigo_produto, id_fornecedor, id_seçao FROM produtos";
            ResultSet resultSet = statement.executeQuery(query);

            List<Produto> produtos = new ArrayList<>();
            while (resultSet.next()) {
            	Produto produto = new Produto(
            		    resultSet.getString("descricao"),
            		    resultSet.getDate("validade").toLocalDate(),
            		    resultSet.getInt("quantidade"),
            		    resultSet.getDouble("valorCompraUnidade"), // Use o nome correto do campo do banco de dados
            		    resultSet.getDouble("valorVendaUnidade"),   // Use o nome correto do campo do banco de dados
            		    resultSet.getString("marcaProduto"),         // Use o nome correto do campo do banco de dados
            		    resultSet.getString("codigoProduto")         // Use o nome correto do campo do banco de dados
            		);

                produtos.add(produto);
            }

            return produtos;
        }
    }
}
