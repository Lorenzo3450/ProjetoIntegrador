package controller.Gestor;

import controller.Main;
import javafx.fxml.FXML;
import javafx.scene.control.Alert;
import javafx.scene.control.Alert.AlertType;
import javafx.scene.control.TextField;
import javafx.scene.image.ImageView;
import javafx.scene.input.MouseEvent;
import model.Gestor.TelaDeCadastrarProdutoDao;

public class TeladeCadastraProdutoController {

    @FXML
    private ImageView BtnSalvar;

    @FXML
    private TextField TxtCodigoDeBarras;

    @FXML
    private TextField TxtDataCompra;

    @FXML
    private TextField TxtDescricao;

    @FXML
    private TextField TxtPrecoUnidade;

    @FXML
    private TextField TxtQuantidadeTotal;

    @FXML
    private TextField TxtValidade;

    @FXML
    private TextField TxtVendidoUnidade;
    
    @FXML
    private TextField TxtEstoqueMinimo;

    
    @FXML
    void Vol1(MouseEvent event) throws Exception {
    	
    	Main.Cena("TelaPrinicipalGestor");
    	
    }

    @FXML
    void Salvar(MouseEvent event) {
        // Obtenha os valores dos campos de entrada
        String codigoDeBarras = TxtCodigoDeBarras.getText();
        String dataCompra = TxtDataCompra.getText();
        String descricao = TxtDescricao.getText();
        String precoUnidade = TxtPrecoUnidade.getText();
        String quantidadeTotal = TxtQuantidadeTotal.getText();
        String validade = TxtValidade.getText();
        String vendidoUnidade = TxtVendidoUnidade.getText();

        try {
            // Crie uma instância do DAO
            TelaDeCadastrarProdutoDao produtoDao = new TelaDeCadastrarProdutoDao();

            // Chame o método de cadastro de produto
            produtoDao.cadastraProduto(codigoDeBarras, dataCompra, descricao, precoUnidade, quantidadeTotal, validade, vendidoUnidade);

            // Exiba uma mensagem de sucesso
            Alert alert = new Alert(AlertType.INFORMATION);
            alert.setTitle("Cadastro de Produto");
            alert.setHeaderText(null);
            alert.setContentText("Produto cadastrado com sucesso!");
            alert.showAndWait();

            // Limpe os campos após o cadastro
            LimparCampos();

        } catch (Exception e) {
            // Em caso de erro, exiba uma mensagem de erro
            Alert alert = new Alert(AlertType.ERROR);
            alert.setTitle("Erro");
            alert.setHeaderText(null);
            alert.setContentText("Ocorreu um erro ao cadastrar o produto.");
            alert.showAndWait();
            e.printStackTrace();
        }
    }

    // Método para limpar os campos após o cadastro
    private void LimparCampos() {
        TxtCodigoDeBarras.clear();
        TxtDataCompra.clear();
        TxtDescricao.clear();
        TxtPrecoUnidade.clear();
        TxtQuantidadeTotal.clear();
        TxtValidade.clear();
        TxtVendidoUnidade.clear();
    }
}