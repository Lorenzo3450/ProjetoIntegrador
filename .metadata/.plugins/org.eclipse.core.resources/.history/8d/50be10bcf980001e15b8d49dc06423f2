package controller.gerente;

import java.sql.SQLException;

import controller.Main;
import javafx.application.Platform;
import javafx.fxml.FXML;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.AnchorPane;
import javafx.stage.Stage;
import javafx.stage.StageStyle;
import model.DesignSistema;
import model.dao.Gerente.PersonalizaSistemaDao;

public class SideBarController {

    @FXML
    private ImageView Logo;

    @FXML
    private ImageView Logo1;

    @FXML
    private ImageView Logo11;

    @FXML
    private ImageView Logo111;

    @FXML
    private AnchorPane painelABerto;

    @FXML
    private AnchorPane painelFuncionario;

    @FXML
    private AnchorPane painelRelatorio;
    
    @FXML
    private Stage stage;

    public void setStage(Stage stage) {
        this.stage = stage;
    }
    
    @FXML
    void initialize() {
        

   	 DesignSistema design = null;
        try {
            design = PersonalizaSistemaDao.buscaDesign();
        } catch (SQLException e) {
            e.printStackTrace();
            // Lidere com erros de consulta aqui, se necess√°rio
        }
        if(design!=null) {

        Image Fundo = new Image(design.getFundoImagem());
        Image Logo = new Image(design.getLogoImagem());
        
   	AlterarComponentes(Fundo, Logo, design.getCorSecundaria(), design.getTipoFonte(),design.getCorSecundaria() , design.getTipoFonte(), design.getCorPrincipal()
   			, design.getCorSecundaria(), design.getCorTerciaria());
        }
    	
    	AbrirSideBar(null);
    	
    	  if (stage != null) {
              stage.initStyle(StageStyle.UNDECORATED);
          }
    	
    }

    @FXML
    void AbrirSideBar(MouseEvent event) {

       	painelRelatorio.setVisible(false);
    	painelRelatorio.setDisable(true);
    	painelFuncionario.setVisible(false);
    	painelFuncionario.setDisable(true);
    	painelABerto.setVisible(true);
    	painelABerto.setDisable(false);
    	
    	
    }

    @FXML
    void FecharSideBar(MouseEvent event) {
    	Stage stage = (Stage) painelABerto.getScene().getWindow();
        stage.close();
    }

    @FXML
    void IrParaFuncionarios(MouseEvent event) {

    	painelRelatorio.setVisible(false);
    	painelRelatorio.setDisable(true);
    	painelFuncionario.setVisible(true);
    	painelFuncionario.setDisable(false);
    	painelABerto.setVisible(true);
    	painelABerto.setDisable(false);
    	
    }

    @FXML
    void IrParaGraficoMes(MouseEvent event) throws Exception {

    	System.out.println("mes");
    	FecharSideBar(event);
    	Main.Cena("GraficoMes");
    	
    }

    @FXML
    void IrParaGraficoSecao(MouseEvent event) throws Exception {

    	Main.Cena("GraficoSecao");
    	FecharSideBar(event);
    }

    @FXML
    void IrParaInicio(MouseEvent event) throws Exception {
    	FecharSideBar(event);
    	Main.Cena("TelaPrincipalGerente");
    	
    }

    @FXML
    void IrParaPerfil(MouseEvent event) throws Exception {

    	FecharSideBar(event);
    	Main.Cena("TelaDePerfil");
    	
    	
    }

    @FXML
    void IrParaProdutos(MouseEvent event) {

    }

    @FXML
    void IrParaRelatorioABC(MouseEvent event) throws Exception {
    	FecharSideBar(event);
    	Main.Cena("TelaRelatorioABC");
    	
    }

    @FXML
    void IrParaRelatorios(MouseEvent event) {

    	painelRelatorio.setVisible(true);
    	painelRelatorio.setDisable(false);
    	painelFuncionario.setVisible(false);
    	painelFuncionario.setDisable(true);
    	painelABerto.setVisible(true);
    	painelABerto.setDisable(false);
    	
    }

    @FXML
    void IrParaTabelaFuncionario(MouseEvent event) throws Exception {

    	FecharSideBar(event);
    	Main.Cena("TabelaFuncionarios");

    	System.out.println("funci");
    	
    }

    @FXML
    void IrParaVendas(MouseEvent event) {

    }

    public void AlterarComponentes(Image fundo,Image logo,String txtf,String letraTxtf,String btn,String letraBtn,
			String corPrincipal,String corSecundaria,String corTercearia) {
    	
    	Logo.setImage(logo);

    	Logo1.setImage(logo);

    	Logo11.setImage(logo);

    	Logo111.setImage(logo);
    	
    	painelABerto.setStyle(painelABerto.getStyle()+"-fx-background-color:"+corPrincipal);

    	painelFuncionario.setStyle(painelFuncionario.getStyle()+"-fx-background-color:"+corPrincipal);

        painelRelatorio.setStyle(painelRelatorio.getStyle()+"-fx-background-color:"+corPrincipal);
    	
    	
    }
    
    
}
